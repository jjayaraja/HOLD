<!-- 
====================================================================
INSTALLATION INSTRUCTIONS FOR YOUR EXISTING index.html
====================================================================

STEP 1: Add this to your <head> section or before </body>:
-->
<script type="module" src="./fileUploadPatch.js"></script>

<!-- 
====================================================================
STEP 2: Add file input (if you don't have one already):
Add this near your message input, inside your input area
-->
<input type="file" id="file-input" style="display: none;" />
<button id="file-button" style="padding: 10px 20px; background: #0078d4; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">
    ðŸ“Ž Upload File
</button>

<!-- 
====================================================================
STEP 3: CRITICAL - Expose your copilot client to window scope
Add this to your existing index.js, RIGHT AFTER you create the client:
-->

<!-- In your index.js, after creating copilotClient, add this line: -->
<script type="module">
// Your existing code:
// const copilotClient = new CopilotStudioClient(settings, token);

// ADD THIS LINE to expose the client:
window.copilotClient = copilotClient;

// Also expose conversation ID:
window.conversationId = conversationId;
</script>

<!-- 
====================================================================
COMPLETE EXAMPLE - If you want to see the full structure:
====================================================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copilot Studio Web Client</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="container">
        <h1>Copilot Studio Agent</h1>
        
        <div id="chat-container" class="chat-container">
            <!-- Messages appear here -->
        </div>
        
        <div class="input-area">
            <input type="text" id="message-input" placeholder="Type your message..." />
            <button id="send-button">Send</button>
            
            <!-- ADD THESE TWO LINES: -->
            <button id="file-button">ðŸ“Ž Upload File</button>
            <input type="file" id="file-input" style="display: none;" />
        </div>
    </div>

    <!-- Your existing scripts -->
    <script type="module" src="./index.js"></script>
    
    <!-- ADD THIS LINE: -->
    <script type="module" src="./fileUploadPatch.js"></script>
</body>
</html>

<!-- 
====================================================================
TROUBLESHOOTING
====================================================================

If "stuck on connecting":
1. Check browser console for errors
2. Verify your settings.js has correct values:
   - environmentId
   - schemaName (or agentIdentifier)
   - tenantId
3. Check if acquireToken.js is working correctly
4. Open Network tab and look for failed requests

If file upload doesn't work:
1. Open browser console
2. Look for "File Upload Patch loaded" message
3. Look for "Found copilot client" message
4. If you see "Copilot client not found", you need to expose it:
   Add this to your index.js: window.copilotClient = copilotClient;

For debugging:
1. Open browser console
2. Type: window.copilotClient (should show the client object)
3. Type: window.conversationId (should show the ID)
4. Type: window.fileUploadPatch (should show the patch functions)
-->
